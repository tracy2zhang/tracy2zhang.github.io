webpackJsonp([3],{646:function(t,i,e){function n(t){e(704)}var s=e(6)(e(675),e(722),n,"data-v-ec111780",null);t.exports=s.exports},654:function(t,i,e){"use strict";var n=e(25),s=e.n(n),a=e(54);i.a={computed:s()({},e.i(a.a)(["playlist"])),mounted:function(){this.handlePlaylist(this.playlist)},activated:function(){this.handlePlaylist(this.playlist)},watch:{playlist:function(){this.handlePlaylist(this.playlist)}},methods:{handlePlaylist:function(){throw new Error("Component must implements handlePlaylist method")}}}},655:function(t,i,e){t.exports=e.p+"img/default_disc.5ab5cb8.jpg"},656:function(t,i,e){"use strict";var n=e(1);e.n(n).a.register({"ellipsis-h":{width:1408,height:1792,paths:[{d:"M384 736v192q0 40-28 68t-68 28h-192q-40 0-68-28t-28-68v-192q0-40 28-68t68-28h192q40 0 68 28t28 68zM896 736v192q0 40-28 68t-68 28h-192q-40 0-68-28t-28-68v-192q0-40 28-68t68-28h192q40 0 68 28t28 68zM1408 736v192q0 40-28 68t-68 28h-192q-40 0-68-28t-28-68v-192q0-40 28-68t68-28h192q40 0 68 28t28 68z"}]}})},657:function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=e(25),s=e.n(n),a=e(54),c=e(44),o=e(219),l=e.n(o),r=e(56),A=e.n(r),d=e(221),p=e.n(d),u=e(654),g=e(55),f=e(37),h=e(1),m=e.n(h),C=(e(660),e(220),e(662),e(661),e(656),e(655));i.default={name:"music-list",components:{Icon:m.a,SongList:l.a,Scroller:A.a,NoResult:p.a},mixins:[u.a],props:{bgImage:{type:String,default:""},songs:{type:Array,default:function(){return[]}},rank:{type:Boolean,default:!1},title:{type:String,default:""},collectable:{type:Boolean,default:!1},collected:{type:Boolean,default:!1},editable:{type:Boolean,default:!1}},created:function(){this.imageHeight=0},mounted:function(){this.imageHeight=this.$refs.bgImage.clientHeight,this.$refs.scroller.$el.style.top=this.imageHeight+"px"},data:function(){return{scrollToTop:!1,scaling:!1,defaultBg:C}},computed:{bgStyle:function(){return{backgroundImage:"url("+(this.bgImage||(this.editable?this.defaultBg:""))+")"}},collectIcon:function(){return this.collected?"star":"star-o"}},methods:s()({},e.i(a.c)({addSong:c.g,randomPlay:c.l,selectAndPlay:c.k}),{back:function(){this.$router.back()},toggleCollect:function(){this.$emit("toggleCollect")},edit:function(){this.$emit("edit")},onScroll:function(t){var i=t.y,n=this.imageHeight-40,s=Math.abs(i/this.imageHeight);if(i<=0){this.scaling=!1;var a=0;-i>=n?(a=n,this.scrollToTop=!0):(this.scrollToTop=!1,a=i);var c=Math.min(20*s,20);e.i(f.d)(this.$refs.filter,"backdropFilter","blur("+c+"px)"),e.i(f.d)(this.$refs.scrollLayer,"transform","translate3d(0, "+a+"px, 0)")}else if(i>0){var o=1+s;this.scaling=!0,e.i(f.d)(this.$refs.bgImage,"transform","translate3d(0, 0, 0) scale("+o+")")}},selectSong:function(t,i){this.selectAndPlay({index:i,list:this.songs})},editSong:function(t,i,e){var n=this,s=t.pageX,a=t.pageY,c=t.offsetX,o=t.offsetY,l=t.target,r=[{desc:"添加到播放列表",operation:function(){n.addSong(i)}},{desc:"添加到我的歌单",operation:function(){n.$emit("addSongToMyDisc",i)}}];this.editable&&r.push({desc:"移除",operation:function(){n.$emit("removeSongFromMyDisc",i)}}),this.$popup.show({x:s-c+l.clientWidth/2,y:a-o+l.clientHeight/2,actions:r})},handlePlaylist:function(t){var i=t.length>0?g.f:0;this.$refs.musiclist.style.bottom=i,this.$refs.scroller.refresh()}})}},658:function(t,i,e){i=t.exports=e(644)(!0),i.push([t.i,".music-list[data-v-acf5b660]{position:fixed;z-index:100;top:0;left:0;bottom:0;right:0;background:#222}.music-list .back[data-v-acf5b660]{position:absolute;top:0;left:3px;z-index:110}.music-list .back .icon-back[data-v-acf5b660]{display:block;padding:2px 10px 10px;color:#ffcd32}.music-list .collect[data-v-acf5b660],.music-list .edit[data-v-acf5b660]{position:absolute;top:0;right:0;z-index:110}.music-list .collect .icon-collect[data-v-acf5b660],.music-list .collect .icon-edit[data-v-acf5b660],.music-list .edit .icon-collect[data-v-acf5b660],.music-list .edit .icon-edit[data-v-acf5b660]{display:block;padding:8px 8px 10px 10px;color:#ffcd32}.music-list .title[data-v-acf5b660]{position:absolute;top:0;left:10%;z-index:110;width:80%;text-overflow:ellipsis;overflow:hidden;white-space:nowrap;text-align:center;line-height:40px;font-size:18px;color:#fff}.music-list .bg-image[data-v-acf5b660]{position:relative;width:100%;height:0;padding-top:70%;background:#222 no-repeat top;transform-origin:top;background-size:cover}.music-list .bg-image.compress[data-v-acf5b660]{padding-top:0;height:40px;z-index:106}.music-list .bg-image.compress .play-wrapper[data-v-acf5b660]{display:none}.music-list .bg-image.scaling[data-v-acf5b660]{z-index:106}.music-list .bg-image .play-wrapper[data-v-acf5b660]{position:absolute;bottom:25px;z-index:2;width:100%}.music-list .bg-image .play-wrapper .play[data-v-acf5b660]{box-sizing:border-box;line-height:1;width:135px;padding:7px 0;margin:0 auto;text-align:center;border:1px solid #ffcd32;color:#ffcd32;border-radius:100px;display:-ms-flexbox;display:flex;-ms-flex-pack:center;justify-content:center;-ms-flex-align:center;align-items:center;font-size:0}.music-list .bg-image .play-wrapper .play .icon-play[data-v-acf5b660]{display:inline-block;margin-right:6px}.music-list .bg-image .play-wrapper .play .text[data-v-acf5b660]{font-weight:700;display:inline-block;font-size:12px}.music-list .bg-image .filter[data-v-acf5b660]{position:absolute;top:0;left:0;width:100%;height:100%;z-index:1;background:rgba(7,17,27,.25)}.music-list .no-result-wrapper[data-v-acf5b660]{text-align:center}.music-list .scroll-layer[data-v-acf5b660]{position:relative;height:100%;background:#222;z-index:104}.music-list .list[data-v-acf5b660]{position:absolute;top:0;bottom:0;width:100%;z-index:105;background:#222}.music-list .list .song-list-wrapper[data-v-acf5b660]{padding:20px 30px}","",{version:3,sources:["/Users/utopia_one/workspace/vue-music/src/components/base/music-list/music-list.vue"],names:[],mappings:"AACA,6BACE,eAAgB,AAChB,YAAa,AACb,MAAO,AACP,OAAQ,AACR,SAAU,AACV,QAAS,AACT,eAAiB,CAClB,AACD,mCACE,kBAAmB,AACnB,MAAO,AACP,SAAU,AACV,WAAa,CACd,AACD,8CACE,cAAe,AACf,sBAA4B,AAC5B,aAAe,CAChB,AACD,yEAEE,kBAAmB,AACnB,MAAO,AACP,QAAS,AACT,WAAa,CACd,AACD,oMAIE,cAAe,AACf,0BAA2B,AAC3B,aAAe,CAChB,AACD,oCACE,kBAAmB,AACnB,MAAO,AACP,SAAU,AACV,YAAa,AACb,UAAW,AACX,uBAAwB,AACxB,gBAAiB,AACjB,mBAAoB,AACpB,kBAAmB,AACnB,iBAAkB,AAClB,eAAgB,AAChB,UAAY,CACb,AACD,uCACE,kBAAmB,AACnB,WAAY,AACZ,SAAU,AACV,gBAAiB,AACjB,8BAAsC,AACtC,qBAAsB,AACtB,qBAAuB,CACxB,AACD,gDACE,cAAe,AACf,YAAa,AACb,WAAa,CACd,AACD,8DACE,YAAc,CACf,AACD,+CACE,WAAa,CACd,AACD,qDACE,kBAAmB,AACnB,YAAa,AACb,UAAW,AACX,UAAY,CACb,AACD,2DACE,sBAAuB,AACvB,cAAe,AACf,YAAa,AACb,cAAe,AACf,cAAe,AACf,kBAAmB,AACnB,yBAA0B,AAC1B,cAAe,AACf,oBAAqB,AACrB,oBAAqB,AACrB,aAAc,AACd,qBAAsB,AAClB,uBAAwB,AAC5B,sBAAuB,AACnB,mBAAoB,AACxB,WAAa,CACd,AACD,sEACE,qBAAsB,AACtB,gBAAkB,CACnB,AACD,iEACE,gBAAkB,AAClB,qBAAsB,AACtB,cAAgB,CACjB,AACD,+CACE,kBAAmB,AACnB,MAAO,AACP,OAAQ,AACR,WAAY,AACZ,YAAa,AACb,UAAW,AACX,4BAAkC,CACnC,AACD,gDACE,iBAAmB,CACpB,AACD,2CACE,kBAAmB,AACnB,YAAa,AACb,gBAAiB,AACjB,WAAa,CACd,AACD,mCACE,kBAAmB,AACnB,MAAO,AACP,SAAU,AACV,WAAY,AACZ,YAAa,AACb,eAAiB,CAClB,AACD,sDACE,iBAAmB,CACpB",file:"music-list.vue",sourcesContent:["\n.music-list[data-v-acf5b660] {\n  position: fixed;\n  z-index: 100;\n  top: 0;\n  left: 0;\n  bottom: 0;\n  right: 0;\n  background: #222;\n}\n.music-list .back[data-v-acf5b660] {\n  position: absolute;\n  top: 0;\n  left: 3px;\n  z-index: 110;\n}\n.music-list .back .icon-back[data-v-acf5b660] {\n  display: block;\n  padding: 2px 10px 10px 10px;\n  color: #ffcd32;\n}\n.music-list .collect[data-v-acf5b660],\n.music-list .edit[data-v-acf5b660] {\n  position: absolute;\n  top: 0;\n  right: 0;\n  z-index: 110;\n}\n.music-list .collect .icon-collect[data-v-acf5b660],\n.music-list .edit .icon-collect[data-v-acf5b660],\n.music-list .collect .icon-edit[data-v-acf5b660],\n.music-list .edit .icon-edit[data-v-acf5b660] {\n  display: block;\n  padding: 8px 8px 10px 10px;\n  color: #ffcd32;\n}\n.music-list .title[data-v-acf5b660] {\n  position: absolute;\n  top: 0;\n  left: 10%;\n  z-index: 110;\n  width: 80%;\n  text-overflow: ellipsis;\n  overflow: hidden;\n  white-space: nowrap;\n  text-align: center;\n  line-height: 40px;\n  font-size: 18px;\n  color: #fff;\n}\n.music-list .bg-image[data-v-acf5b660] {\n  position: relative;\n  width: 100%;\n  height: 0;\n  padding-top: 70%;\n  background: #222 no-repeat center top;\n  transform-origin: top;\n  background-size: cover;\n}\n.music-list .bg-image.compress[data-v-acf5b660] {\n  padding-top: 0;\n  height: 40px;\n  z-index: 106;\n}\n.music-list .bg-image.compress .play-wrapper[data-v-acf5b660] {\n  display: none;\n}\n.music-list .bg-image.scaling[data-v-acf5b660] {\n  z-index: 106;\n}\n.music-list .bg-image .play-wrapper[data-v-acf5b660] {\n  position: absolute;\n  bottom: 25px;\n  z-index: 2;\n  width: 100%;\n}\n.music-list .bg-image .play-wrapper .play[data-v-acf5b660] {\n  box-sizing: border-box;\n  line-height: 1;\n  width: 135px;\n  padding: 7px 0;\n  margin: 0 auto;\n  text-align: center;\n  border: 1px solid #ffcd32;\n  color: #ffcd32;\n  border-radius: 100px;\n  display: -ms-flexbox;\n  display: flex;\n  -ms-flex-pack: center;\n      justify-content: center;\n  -ms-flex-align: center;\n      align-items: center;\n  font-size: 0;\n}\n.music-list .bg-image .play-wrapper .play .icon-play[data-v-acf5b660] {\n  display: inline-block;\n  margin-right: 6px;\n}\n.music-list .bg-image .play-wrapper .play .text[data-v-acf5b660] {\n  font-weight: bold;\n  display: inline-block;\n  font-size: 12px;\n}\n.music-list .bg-image .filter[data-v-acf5b660] {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  z-index: 1;\n  background: rgba(7, 17, 27, 0.25);\n}\n.music-list .no-result-wrapper[data-v-acf5b660] {\n  text-align: center;\n}\n.music-list .scroll-layer[data-v-acf5b660] {\n  position: relative;\n  height: 100%;\n  background: #222;\n  z-index: 104;\n}\n.music-list .list[data-v-acf5b660] {\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  width: 100%;\n  z-index: 105;\n  background: #222;\n}\n.music-list .list .song-list-wrapper[data-v-acf5b660] {\n  padding: 20px 30px;\n}\n"],sourceRoot:""}])},659:function(t,i,e){var n=e(658);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);e(645)("40f9bc7f",n,!0)},660:function(t,i,e){"use strict";var n=e(1);e.n(n).a.register({"angle-left":{width:640,height:1792,paths:[{d:"M627 544q0 13-10 23l-393 393 393 393q10 10 10 23t-10 23l-50 50q-10 10-23 10t-23-10l-466-466q-10-10-10-23t10-23l466-466q10-10 23-10t23 10l50 50q10 10 10 23z"}]}})},661:function(t,i,e){"use strict";var n=e(1);e.n(n).a.register({"star-o":{width:1664,height:1792,paths:[{d:"M1137 1004l306-297-422-62-189-382-189 382-422 62 306 297-73 421 378-199 377 199zM1664 647q0 22-26 48l-363 354 86 500q1 7 1 20 0 50-41 50-19 0-40-12l-449-236-449 236q-22 12-40 12-21 0-31.5-14.5t-10.5-35.5q0-6 2-20l86-500-364-354q-25-27-25-48 0-37 56-46l502-73 225-455q19-41 49-41t49 41l225 455 502 73q56 9 56 46z"}]}})},662:function(t,i,e){"use strict";var n=e(1);e.n(n).a.register({star:{width:1664,height:1792,paths:[{d:"M1664 647q0 22-26 48l-363 354 86 500q1 7 1 20 0 21-10.5 35.5t-30.5 14.5q-19 0-40-12l-449-236-449 236q-22 12-40 12-21 0-31.5-14.5t-10.5-35.5q0-6 2-20l86-500-364-354q-25-27-25-48 0-37 56-46l502-73 225-455q19-41 49-41t49 41l225 455 502 73q56 9 56 46z"}]}})},663:function(t,i,e){function n(t){e(659)}var s=e(6)(e(657),e(664),n,"data-v-acf5b660",null);t.exports=s.exports},664:function(t,i){t.exports={render:function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{ref:"musiclist",staticClass:"music-list"},[e("div",{staticClass:"back",on:{click:t.back}},[e("icon",{staticClass:"icon-back",attrs:{name:"angle-left",scale:"2"}})],1),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.collectable,expression:"collectable"}],staticClass:"collect",on:{click:t.toggleCollect}},[e("icon",{staticClass:"icon-collect",attrs:{name:t.collectIcon,scale:"1.4"}})],1),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.editable,expression:"editable"}],staticClass:"edit",on:{click:t.edit}},[e("icon",{staticClass:"icon-edit",attrs:{name:"ellipsis-h",scale:"1.5"}})],1),t._v(" "),e("h1",{staticClass:"title",domProps:{innerHTML:t._s(t.title)}}),t._v(" "),e("div",{ref:"bgImage",staticClass:"bg-image",class:{compress:t.scrollToTop,scaling:t.scaling},style:t.bgStyle},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.songs.length,expression:"songs.length"}],staticClass:"play-wrapper"},[e("div",{ref:"playBtn",staticClass:"play",on:{click:function(i){t.randomPlay(t.songs)}}},[e("icon",{staticClass:"icon-play",attrs:{name:"play-circle-o",scale:"1.25"}}),t._v(" "),e("span",{staticClass:"text"},[t._v("随机播放全部")])],1)]),t._v(" "),e("div",{ref:"filter",staticClass:"filter"})]),t._v(" "),e("div",{ref:"scrollLayer",staticClass:"scroll-layer"}),t._v(" "),e("scroller",{ref:"scroller",staticClass:"list",attrs:{onScroll:t.onScroll,data:t.songs}},[e("div",{staticClass:"song-list-wrapper"},[e("song-list",{attrs:{songs:t.songs,rank:t.rank,showLoading:!t.editable},on:{selectItem:t.selectSong,edit:t.editSong}})],1),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.editable&&t.songs.length<1,expression:"editable && songs.length < 1"}],staticClass:"no-result-wrapper"},[e("no-result",{attrs:{title:"还没有歌曲，快往歌单里添加歌曲吧~",code:"300"}})],1)])],1)},staticRenderFns:[]}},675:function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=e(25),s=e.n(n),a=e(39),c=e.n(a),o=e(38),l=e.n(o),r=e(44),A=e(54),d=e(222),p=e(40),u=e(74),g=e(37),f=e(95),h=e(663),m=e.n(h);i.default={name:"disc",components:{MusicList:m.a},created:function(){var t=this;return l()(c.a.mark(function i(){return c.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,e.i(g.b)(500);case 2:t._fetchData();case 3:case"end":return i.stop()}},i,t)}))()},beforeRouteUpdate:function(t,i,e){this._fetchData(t.params.dissid),e()},data:function(){return{disc:{},editable:!1,collectable:!0,collected:!1}},computed:s()({},e.i(A.a)(["myDiscList","collectDiscList"]),{title:function(){return this.disc.name||""},bgImage:function(){return this.disc.imgurl||""},songs:function(){return this._formatSongs(this.disc.songs||[])},resetMyDiscList:function(){var t=this;return this.myDiscList.filter(function(i){return i.id!==t.disc.id})}}),methods:s()({},e.i(A.c)({cacheCollect:r.s,decacheCollect:r.t,addSongToMyDisc:r.y,removeSongFromMyDisc:r.z,clearMyDisc:r.A,changeName:r.B}),{init:function(){this.disc={},this.collectable=!0,this.collected=!1},toggleCollect:function(){this.collected?(this.decacheCollect(this.disc),this.collected=!1):(this.cacheCollect(this.disc),this.collected=!0)},edit:function(){var t=this,i=[{desc:"清空",operation:function(){t.disc.songs.length>0&&t.$dialog.confirm({title:"确定要清除此歌单？",confirm:function(){t.clearMyDisc(t.disc)}})}},{desc:"修改名称",operation:function(){t.$dialog.prompt({title:"修改名称",placeholder:"请输入歌单新名称",confirm:function(i){t.changeName({disc:t.disc,name:i})}})}}];this.$actionsheet.show({title:"操作",actions:i})},handleAddSong:function(t){var i=this,e=this.resetMyDiscList.map(function(e){return{desc:e.name,operation:function(){i.addSongToMyDisc({disc:e,song:t})}}});this.$actionsheet.show({title:"请选择要加入的歌单",actions:e})},handleRemoveSong:function(t){this.removeSongFromMyDisc({disc:this.disc,song:t})},_fetchData:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.$route.params.dissid;return this.init(),t?this._getMyDisc(t)?(this.collectable=!1,void(this.editable=!0)):this._getCollectDisc(t)?void(this.collected=!0):void this._getDiscSongList(t):this.$router.back()},_getMyDisc:function(t){var i=this.myDiscList.find(function(i){return i.id===t});return!!i&&(this.disc=i,!0)},_getCollectDisc:function(t){var i=this.collectDiscList.find(function(i){return i.id===t});return!!i&&(this.disc=i,!0)},_getDiscSongList:e.i(u.a)(function(){var t=l()(c.a.mark(function t(i){var n,s,a,o,l,r,A;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.i(d.b)(i);case 2:n=t.sent,n&&n.code===p.a?(s=n.cdlist[0],a=s.disstid,o=s.dissname,l=s.logo,r=s.nickname,A=s.songlist,this.disc={id:a,name:o,imgurl:l,creator:r,songs:A}):this.$router.back();case 4:case"end":return t.stop()}},t,this)}));return function(i){return t.apply(this,arguments)}}()),_formatSongs:function(t){var i=[];return t.forEach(function(t){t.songid&&t.albummid?i.push(f.a.create(t)):t.id&&t.album&&i.push(t)}),i}})}},693:function(t,i,e){i=t.exports=e(644)(!0),i.push([t.i,".slide-enter-active[data-v-ec111780],.slide-leave-active[data-v-ec111780]{transition:all .3s}.slide-enter[data-v-ec111780],.slide-leave-to[data-v-ec111780]{transform:translate(100%)}","",{version:3,sources:["/Users/utopia_one/workspace/vue-music/src/components/disc/disc.vue"],names:[],mappings:"AACA,0EAEE,kBAAoB,CACrB,AACD,+DAEE,yBAA8B,CAC/B",file:"disc.vue",sourcesContent:["\n.slide-enter-active[data-v-ec111780],\n.slide-leave-active[data-v-ec111780] {\n  transition: all .3s;\n}\n.slide-enter[data-v-ec111780],\n.slide-leave-to[data-v-ec111780] {\n  transform: translate(100%, 0);\n}\n"],sourceRoot:""}])},704:function(t,i,e){var n=e(693);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);e(645)("a5f95cde",n,!0)},722:function(t,i){t.exports={render:function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("transition",{attrs:{name:"slide"}},[e("music-list",{attrs:{title:t.title,"bg-image":t.bgImage,songs:t.songs,collectable:t.collectable,collected:t.collected,editable:t.editable},on:{edit:t.edit,toggleCollect:t.toggleCollect,addSongToMyDisc:t.handleAddSong,removeSongFromMyDisc:t.handleRemoveSong}})],1)},staticRenderFns:[]}}});
//# sourceMappingURL=3.0f269de8f95075f73c5a.js.map